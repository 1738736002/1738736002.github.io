<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1.0.2/themes/blue/pace-theme-fill-left.css">
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"1738736002.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ajax的基础知识点">
<meta property="og:type" content="article">
<meta property="og:title" content="ajax数据请求">
<meta property="og:url" content="https://1738736002.github.io/2020/09/10/4.ajax/index.html">
<meta property="og:site_name" content="会眨眼的猫">
<meta property="og:description" content="ajax的基础知识点">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="c:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200720144300013.png">
<meta property="og:image" content="c:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200720155220237.png">
<meta property="og:image" content="c:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200720160545591.png">
<meta property="article:published_time" content="2020-09-10T07:41:06.000Z">
<meta property="article:modified_time" content="2020-09-21T02:43:27.106Z">
<meta property="article:author" content="IT warm Man">
<meta property="article:tag" content="ajax">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200720144300013.png">

<link rel="canonical" href="https://1738736002.github.io/2020/09/10/4.ajax/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ajax数据请求 | 会眨眼的猫</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

   <script type="text/javascript" src="/js/src/loves.js"></script>
<link rel="alternate" href="/atom.xml" title="会眨眼的猫" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  
    <script color="0,0,0" opacity='0.8' zIndex="-2" count="200" type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  
  
  <div class="container use-motion">
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://your-url" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; z-index:200; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">会眨眼的猫</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">拼一个青春无悔！</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-book">

    <a href="/books/" rel="section"><i class="fa fa-book fa-fw"></i>阅读</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://1738736002.github.io/2020/09/10/4.ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3684345252,2646729991&fm=26&gp=0.jpg">
      <meta itemprop="name" content="IT warm Man">
      <meta itemprop="description" content="IT新人报道，各位大佬们多多指教！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="会眨眼的猫">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ajax数据请求
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-10 15:41:06" itemprop="dateCreated datePublished" datetime="2020-09-10T15:41:06+08:00">2020-09-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-21 10:43:27" itemprop="dateModified" datetime="2020-09-21T10:43:27+08:00">2020-09-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92/" itemprop="url" rel="index"><span itemprop="name">数据交互</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/09/10/4.ajax/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/09/10/4.ajax/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>18k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>17 分钟</span>
            </span>
            <div class="post-description">ajax的基础知识点</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h3><blockquote>
<p>Web 程序最初的目的就是将信息（数据）放到公共的服务器，让所有网络用户都可以通过浏览器访问。  </p>
</blockquote>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200720144300013.png" alt="image-20200720144300013"></p>
<p>A JAX（Asynchronous JavaScript and XML），最早出现在 2005 年的 Google Suggest，是在浏览器端进行网络编程（发送请求、接收响应）的技术方案，它使我们可以通过 JavaScript 直接获取服务端最新的内容而不必重新加载页面。让 Web 更能接近桌面应用的用户体验。</p>
<a id="more"></a>
<blockquote>
<p>网络编程:  用代码的方法去操作网络</p>
</blockquote>
<p>  说白了，<strong>A JAX 就是浏览器提供的一套 API，可以通过 JavaScript 调用，从而实现通过代码控制请求与响应。实现网络编程。</strong>  </p>
<blockquote>
<p>能力不够API凑</p>
</blockquote>
<img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200720155220237.png" alt="image-20200720155220237" style="zoom:200%;" />



<h3 id="2-快速上手"><a href="#2-快速上手" class="headerlink" title="2.快速上手"></a>2.快速上手</h3><p>**使用 A JAX 的过程可以类比平常我们访问网页过程  **</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建一个 XMLHttpRequest 类型的对象 —— 相当于打开了一个浏览器(发送请求响应)</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="comment">//   2. 打开与一个网址之间的连接 —— 相当于在地址栏输入访问地址</span></span><br><span class="line">xhr.op en(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;./time.php&#x27;</span>)</span><br><span class="line"><span class="comment">// 3. 通过连接发送一次请求 —— 相当于回车或者点击访问发送请求</span></span><br><span class="line">xhr.send(<span class="literal">null</span>)</span><br><span class="line"><span class="comment">// 4. 指定 xhr 状态变化事件处理函数 —— 相当于处理网页呈现后的操作</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 通过 xhr 的 readyState 判断此次请求的响应是否接收完成</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">       <span class="comment">// 通过 xhr 的 responseText 获取到响应的响应体</span></span><br><span class="line">       <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：在使用AJAX操作页面的时候，不能使用文件协议访问（文件的方式访问）</p>
<p>获取请求头方法：getAllResponseHeader()  //获取所有的请求头。 getResponseHeader(“server”)  // 获取单个</p>
</blockquote>
<h4 id="2-1-readyState"><a href="#2-1-readyState" class="headerlink" title="2.1.readyState"></a>2.1.readyState</h4><p>由于 readystatechange 事件是在 xhr 对象<strong>状态变化</strong>时触发（不单是在得到响应时），也就意味着这个事件会被触发多次，所以我们有必要了解每一个状态值代表的含义：  </p>
<table>
<thead>
<tr>
<th>readyState</th>
<th>状态描述</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>UNSENT</td>
<td>代理（XHR）被创建，但尚未调用 open() 方法。</td>
</tr>
<tr>
<td>1</td>
<td>OPENED</td>
<td>open() 方法已经被调用，建立了一个与服务端特定端口的连接。</td>
</tr>
<tr>
<td>2</td>
<td>HEADERS_RECEIVED</td>
<td>send() 方法已经被调用，并且已经可以获取状态行和响应头。</td>
</tr>
<tr>
<td>3</td>
<td>LOADING</td>
<td>响应体下载中， responseText 属性可能已经包含部分数据。</td>
</tr>
<tr>
<td>4</td>
<td>DONE</td>
<td>响应体下载完成，可以直接使用 responseText 。</td>
</tr>
</tbody></table>
<p><strong>时间轴</strong></p>
<p><img data-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200720160545591.png" alt="image-20200720160545591"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">switch</span>(xhr.readyState)&#123;</span><br><span class="line">     <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//OPENED</span></span><br><span class="line">       <span class="comment">//do something</span></span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">case</span> <span class="number">2</span>:<span class="comment">//HEADERS_RECEIVED</span></span><br><span class="line">       <span class="comment">//do something</span></span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">case</span> <span class="number">3</span>:<span class="comment">//LOADING</span></span><br><span class="line">       <span class="comment">//do something</span></span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">case</span> <span class="number">4</span>:<span class="comment">//DONE</span></span><br><span class="line">       <span class="comment">//do something</span></span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>通过理解每一个状态值的含义得出一个结论：一般我们都是在 readyState 值为 4 时，执行响应的后续逻辑。  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">this</span>.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">	<span class="comment">// 后续逻辑......</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//相当于HTML5提供的onload</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.readyState)   <span class="comment">// 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-遵循HTTP"><a href="#2-2-遵循HTTP" class="headerlink" title="2.2.遵循HTTP"></a>2.2.遵循HTTP</h4><p>本质上 XMLHttpRequest 就是 JavaScript 在 Web 平台中发送 HTTP 请求的手段，所以我们发送出去的请求任然是HTTP 请求，同样符合 HTTP 约定的格式  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置请求报文的请求行</span></span><br><span class="line">xhr.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;./time.php&#x27;</span>)</span><br><span class="line"><span class="comment">// 设置请求头</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">&#x27;Accept&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>)</span><br><span class="line"><span class="comment">// 设置请求体</span></span><br><span class="line">xhr.send(<span class="literal">null</span>)</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.readyState === <span class="number">4</span>) &#123;</span><br><span class="line"><span class="comment">// 获取响应状态码</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.status)</span><br><span class="line"><span class="comment">// 获取响应状态描述</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.statusText)</span><br><span class="line"><span class="comment">// 获取响应头信息</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.getResponseHeader(<span class="string">&#x27;Content‐Type&#x27;</span>)) <span class="comment">// 指定响应头</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.getAllResponseHeaders()) <span class="comment">// 全部响应头</span></span><br><span class="line"><span class="comment">// 获取响应体</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.responseText) <span class="comment">// 文本形式</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.responseXML) <span class="comment">// XML 形式，了解即可不用了</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>console.log(this.getResponseHeader(‘Content‐Type’)) // 指定响应头<br>console.log(this.getAllResponseHeaders()) // 全部响应头</p>
</blockquote>
<h4 id="2-3-open-参数"><a href="#2-3-open-参数" class="headerlink" title="2.3.open()参数"></a>2.3.open()参数</h4><p><code>xhr.open(method,url,async)</code></p>
<ul>
<li>method：表示方法，<code>GET</code>或者<code>POST</code></li>
<li>url：请求路径</li>
<li>async：默认值为true，表示请求是异步执行的</li>
</ul>
<blockquote>
<p>注意当async=false时，注意send()与onreadystatechange()的顺序。</p>
</blockquote>
<p><strong>发送信息,即请求体</strong></p>
<ul>
<li>GET方法，通过向URL添加信息，传递信息</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.open(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;demo_get2.asp?fname=Bill&amp;lname=Gates&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">xmlhttp.send();</span><br></pre></td></tr></table></figure>

<ul>
<li>POST方法，可通过send方法，<code>xhr.send(string)</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.open(<span class="string">&quot;POST&quot;</span>,<span class="string">&quot;ajax_test.asp&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">xmlhttp.setRequestHeader(<span class="string">&quot;Content-type&quot;</span>,<span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class="line">xmlhttp.send(<span class="string">&quot;fname=Bill&amp;lname=Gates&quot;</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果需要像 HTML 表单那样 POST 数据，请使用 setRequestHeader() 来添加 HTTP 头。</p>
<p>详细请看xhr.responseType</p>
</blockquote>
<h4 id="2-4-服务器响应"><a href="#2-4-服务器响应" class="headerlink" title="2.4.服务器响应"></a>2.4.服务器响应</h4><ol>
<li>获取服务服务器的响应<ul>
<li>responseTest 获得字符串形式的响应数据<ul>
<li>如果来自服务器的响应并非 XML，请使用 responseText 属性。</li>
</ul>
</li>
<li>responseXML获得XML形式的相应数据。<ul>
<li>如果来自服务器的响应是 XML，而且需要作为 XML 对象进行解析，使用 responseXML 属性</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="2-5-responseType"><a href="#2-5-responseType" class="headerlink" title="2.5.responseType"></a>2.5.responseType</h4><blockquote>
<p>他用来用来指定xhr.response的数据类型，存在兼容性的问题。</p>
</blockquote>
<p>responseType支持的格式</p>
<table>
<thead>
<tr>
<th align="left">值</th>
<th align="left"><code>xhr.response</code> 数据类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>&quot;&quot;</code></td>
<td align="left"><code>String</code>字符串</td>
<td align="left">默认值(在不设置<code>responseType</code>时)</td>
</tr>
<tr>
<td align="left"><code>&quot;text&quot;</code></td>
<td align="left"><code>String</code>字符串</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>&quot;document&quot;</code></td>
<td align="left"><code>Document</code>对象</td>
<td align="left">希望返回 <code>XML</code> 格式数据时使用</td>
</tr>
<tr>
<td align="left"><code>&quot;json&quot;</code></td>
<td align="left"><code>javascript</code> 对象</td>
<td align="left">存在兼容性问题，IE10/IE11不支持</td>
</tr>
<tr>
<td align="left"><code>&quot;blob&quot;</code></td>
<td align="left"><code>Blob</code>对象</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>&quot;arrayBuffer&quot;</code></td>
<td align="left"><code>ArrayBuffer</code>对象</td>
<td align="left"></td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以将`xhr.responseType`设置为`&quot;blob&quot;`也可以设置为`&quot; arrayBuffer&quot;`</span></span><br><span class="line"><span class="comment">//xhr.responseType = &#x27;arrayBuffer&#x27;;</span></span><br><span class="line">xhr.responseType = <span class="string">&#x27;blob&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><code>xhr.send(data)</code>中data参数的数据类型会影响请求头部<code>content-type</code>的默认值：</p>
<ul>
<li>如果<code>data</code>是 <code>Document</code> 类型，同时也是<code>HTML Document</code>类型，则<code>content-type</code>默认值为<code>text/html;charset=UTF-8</code>;否则为<code>application/xml;charset=UTF-8</code>；</li>
<li>如果<code>data</code>是 <code>DOMString</code> 类型，<code>content-type</code>默认值为<code>text/plain;charset=UTF-8</code>；</li>
<li>如果<code>data</code>是 <code>FormData</code> 类型，<code>content-type</code>默认值为<code>multipart/form-data; boundary=[xxx]</code></li>
<li>如果<code>data</code>是其他类型，则不会设置<code>content-type</code>的默认值</li>
</ul>
<p>当然这些只是<code>content-type</code>的默认值，但如果用<code>xhr.setRequestHeader()</code>手动设置了中<code>content-type</code>的值，以上默认值就会被覆盖。</p>
<blockquote>
<p>在使用xhr.send()方法，应该用try-catch捕获一下错误，不然无法执行后序的代码。</p>
</blockquote>
<h4 id="2-6-响应状态"><a href="#2-6-响应状态" class="headerlink" title="2.6.响应状态"></a>2.6.响应状态</h4><p><strong>响应状态码</strong>：</p>
<ul>
<li>2xx -表示成功处理请求。如200</li>
<li>3xx -需要重新定向，浏览器直接跳转</li>
<li>4xx - 客户端请求错误， 如404</li>
<li>5xx -服务器端错误</li>
</ul>
<p><code>xhr.statusText</code>：获取的是对响应状态的描述。</p>
<h3 id="3-用法"><a href="#3-用法" class="headerlink" title="3.用法"></a>3.用法</h3><h4 id="3-1-GET请求"><a href="#3-1-GET请求" class="headerlink" title="3.1.GET请求"></a>3.1.GET请求</h4><blockquote>
<p>通常在一次 GET 请求过程中，参数传递都是通过 URL 地址中的 ? 参数传递。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="comment">// GET 请求传递参数通常使用的是问号传参</span></span><br><span class="line"><span class="comment">// 这里可以在请求地址后面加上参数，从而传递数据到服务端</span></span><br><span class="line">xhr.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;./delete.php?id=1&#x27;</span>)</span><br><span class="line"><span class="comment">// 一般在 GET 请求时无需设置响应体，可以传 null 或者干脆不传</span></span><br><span class="line">xhr.send(<span class="literal">null</span>)</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">this</span>.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="built_in">this</span>.responseText)</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// 一般情况下 URL 传递的都是参数性质的数据，而 POST 一般都是业务数据</span></span><br></pre></td></tr></table></figure>

<p><strong>GET 还是 POST？</strong></p>
<p>与 POST 相比，GET 更简单也更快，并且在大部分情况下都能用。</p>
<p>然而，在以下情况中，请使用 POST 请求：</p>
<ul>
<li>无法使用缓存文件（更新服务器上的文件或数据库）</li>
<li>向服务器发送大量数据（POST 没有数据量限制）</li>
<li>发送包含未知字符的用户输入时，POST 比 GET 更稳定也更可靠</li>
</ul>
<h4 id="3-2-POST请求"><a href="#3-2-POST请求" class="headerlink" title="3.2.POST请求"></a>3.2.POST请求</h4><blockquote>
<p>POST 请求过程中，都是采用请求体承载需要提交的数据。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="comment">// open 方法的第一个参数的作用就是设置请求的 method</span></span><br><span class="line">xhr.open(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;./add.php&#x27;</span>)</span><br><span class="line"><span class="comment">// 设置请求头中的 Content‐Type 为 application/x‐www‐form‐urlencoded</span></span><br><span class="line"><span class="comment">// 标识此次请求的请求体格式为 urlencoded 以便于服务端接收数据</span></span><br><span class="line">xhr.setRequestHeader(<span class="string">&#x27;Content‐Type&#x27;</span>, <span class="string">&#x27;application/x‐www‐form‐urlencoded&#x27;</span>)</span><br><span class="line"><span class="comment">// 需要提交到服务端的数据可以通过 send 方法的参数传递</span></span><br><span class="line"><span class="comment">// 格式：key1=value1&amp;key2=value2</span></span><br><span class="line">xhr.send(<span class="string">&#x27;key1=value1&amp;key2=value2&#x27;</span>)</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="built_in">this</span>.responseText)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>我们的请求报文的请求头的<code>Content-Type</code>应该跟随者请求体的格式的变化而变化。</strong></p>
<h4 id="3-3-同步与异步"><a href="#3-3-同步与异步" class="headerlink" title="3.3.同步与异步"></a>3.3.同步与异步</h4><p>生活的举例</p>
<blockquote>
<p>同步：一个人在同一个时刻只能做一件事情，在执行一些耗时的操作（不需要看管）不去做别的事，只是等待 </p>
<p>异步：在执行一些耗时的操作（不需要看管）去做别的事，而不是等待  </p>
</blockquote>
<p><code>xhr.open()</code> 方法第三个参数要求传入的是一个 bool 值，其作用就是设置此次请求是否采用异步方式执行，默认为 true</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;before ajax&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="comment">// 默认第三个参数为 true 意味着采用异步方式执行</span></span><br><span class="line">xhr.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;./time.php&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">xhr.send(<span class="literal">null</span>)</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">this</span>.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">		<span class="comment">// 这里的代码最后执行</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&#x27;request done&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;after ajax&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果采用同步的方式执行，将async=false；代码会卡死在<code>xhr.send()</code>这一步：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;before ajax&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="comment">// 同步方式</span></span><br><span class="line">xhr.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;./time.php&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line"><span class="comment">// 同步方式 执行需要 先注册事件再调用 send，否则 readystatechange 无法触发</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="comment">// 这里的代码最后执行</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;request done&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.send(<span class="literal">null</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;after ajax&#x27;</span>)  </span><br></pre></td></tr></table></figure>

<p>当<code>xhr</code>为同步请求时，有如下限制：</p>
<ul>
<li><code>xhr.timeout</code>必须为<code>0</code></li>
<li><code>xhr.withCredentials</code>必须为 <code>false</code></li>
<li><code>xhr.responseType</code>必须为<code>&quot;&quot;</code>（注意置为<code>&quot;text&quot;</code>也不允许）</li>
</ul>
<h4 id="补充：进程与线程"><a href="#补充：进程与线程" class="headerlink" title="补充：进程与线程"></a>补充：进程与线程</h4><p>进程：</p>
<ul>
<li><p>相当于戏场</p>
</li>
<li><p>进行中的应用程序。</p>
</li>
</ul>
<p>线程：</p>
<ul>
<li>线程就是拿着剧本的（代码）去演戏的演员。</li>
<li>CPU最小的执行单元。</li>
</ul>
<p>多线程技术：</p>
<ul>
<li>对于单核的，实现原理，就是内核的切换。</li>
<li>多核就是，每个cpu处理一个线程，直到执行完。</li>
</ul>
<h4 id="3-4-响应数据格式"><a href="#3-4-响应数据格式" class="headerlink" title="3.4.响应数据格式"></a>3.4.响应数据格式</h4><blockquote>
<p>不管服务端是采用XML还是采用JSON，本质上都是将数据返回给客户端。</p>
<p>服务端应该设置一个合理的Content-Type</p>
</blockquote>
<p><strong>XML</strong>：数据描述的一种文件格式，不建议使用。</p>
<p>获取XML中的数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在服务器端返回的值中，存在一个`responseXML`它专门用于获取服务端返回的XML数据。</span></span><br><span class="line"><span class="comment">// 操作方式：通过 DOM 的方式操作</span></span><br><span class="line"><span class="comment">// 条件：服务端响应头中的 `content-Type` 必须是 application/xml</span></span><br><span class="line"><span class="built_in">console</span>.log(xhr.responseXML.documentElement.getElementByTagName(<span class="string">&quot;name&quot;</span>))</span><br></pre></td></tr></table></figure>



<p><strong>JSON</strong>：也是一种数据描述手段，类似于 JavaScript 字面量方式 。</p>
<p>服务端采用 JSON 格式返回数据，客户端按照 JSON 格式解析数据。</p>
<ul>
<li>JSON.parse()  –&gt;  json格式</li>
<li>JSON.stringfy() –&gt;字符串</li>
</ul>
<blockquote>
<p>不管是 JSON 也好，还是 XML，只是在 A JAX 请求过程中用到，并不代表它们之间有必然的联系，它们只是数据协议罢了  </p>
</blockquote>
<h4 id="3-5-获取response数据"><a href="#3-5-获取response数据" class="headerlink" title="3.5.获取response数据"></a>3.5.获取response数据</h4><blockquote>
<p><code>xhr提供了3个属性来获取请求返回的数据，分别是：``xhr.response</code>、<code>xhr.responseText</code>、<code>xhr.responseXML</code></p>
</blockquote>
<ul>
<li><code>xhr.response</code><ul>
<li>默认值：空字符串<code>&quot;&quot;</code></li>
<li>当请求完成时，此属性才有正确的值</li>
<li>请求未完成时，此属性的值可能是<code>&quot;&quot;</code>或者 <code>null</code>，具体与 <code>xhr.responseType</code>有关：当<code>responseType</code>为<code>&quot;&quot;</code>或<code>&quot;text&quot;</code>时，值为<code>&quot;&quot;</code>；<code>responseType</code>为其他值时，值为 <code>null</code></li>
</ul>
</li>
<li><code>xhr.responseText</code><ul>
<li>默认值为空字符串<code>&quot;&quot;</code></li>
<li>只有当 <code>responseType</code> 为<code>&quot;text&quot;</code>、<code>&quot;&quot;</code>时，<code>xhr</code>对象上才有此属性，此时才能调用<code>xhr.responseText</code>，否则抛错</li>
<li>只有当请求成功时，才能拿到正确值。以下2种情况下值都为空字符串<code>&quot;&quot;</code>：请求未完成、请求失败</li>
</ul>
</li>
<li><code>xhr.responseXML</code><ul>
<li>默认值为 <code>null</code></li>
<li>只有当 <code>responseType</code> 为<code>&quot;text&quot;</code>、<code>&quot;&quot;</code>、<code>&quot;document&quot;</code>时，<code>xhr</code>对象上才有此属性，此时才能调用<code>xhr.responseXML</code>，否则抛错</li>
<li>只有当请求成功且返回数据被正确解析时，才能拿到正确值。以下3种情况下值都为<code>null</code>：请求未完成、请求失败、请求成功但返回数据无法被正确解析时</li>
</ul>
</li>
</ul>
<h4 id="3-6-处理响应数据渲染"><a href="#3-6-处理响应数据渲染" class="headerlink" title="3.6.处理响应数据渲染"></a>3.6.处理响应数据渲染</h4><blockquote>
<p>模板引擎：<br>artTemplate：<a target="_blank" rel="noopener" href="https://aui.github.io/art-template/">https://aui.github.io/art-template/</a>  </p>
</blockquote>
<p>模板引擎实际上就是一个 API，模板引擎有很多种，使用方式大同小异，目的为了可以更容易的将数据渲染到HTML中  </p>
<blockquote>
<p>当将script的标签类型改为type=“text/art-template”，在script标签内，innerHTML的内容不会显示,这样方便渲染数据。</p>
</blockquote>
<p><strong>使用：</strong></p>
<ol>
<li><p>引入art-template<code>&lt;script url=&quot;./art-template&quot;&gt;&lt;/script&gt;</code></p>
</li>
<li><p>使用标准语法或者原始语法，在<code>&lt;script type=&quot;text-x-art-template&quot;&gt;&lt;/script&gt;</code>内写模板块。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;&lt;/table&gt;</span><br><span class="line">&lt;script id=<span class="string">&quot;tmpl&quot;</span> type=<span class="string">&quot;text-x-art-template&quot;</span>&gt;</span><br><span class="line">    &#123;&#123;each art-data&#125;&#125;</span><br><span class="line">    	&lt;tr&gt;</span><br><span class="line">            &lt;td&gt;&#123;&#123;$value.author&#125;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&#123;&#123;$value.content&#125;&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&#123;&#123;$value.times&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &#123;&#123;/each&#125;&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>注意：上面de<code>$value</code>获取的是当前被遍历的那个元素，并不是值。</p>
</blockquote>
<ol start="3">
<li>使用ajax异步请求获取数据，给art-data赋值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="comment">// 默认第三个参数为 true 意味着采用异步方式执行</span></span><br><span class="line">xhr.open(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;./time.php&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">xhr.send(<span class="literal">null</span>)</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">this</span>.readyState !=== <span class="number">4</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">var</span> res = <span class="built_in">JSON</span>.parse(<span class="built_in">this</span>.responseText)</span><br><span class="line">    <span class="comment">// 为模板准备数据</span></span><br><span class="line">    <span class="keyword">var</span> content = &#123;art-data:res.data&#125;</span><br><span class="line">    <span class="comment">// 借助模板引擎的API，渲染数据</span></span><br><span class="line">    <span class="keyword">var</span> html = template(<span class="string">&#x27;html&#x27;</span>,content)</span><br><span class="line">    <span class="comment">// 将数据添加到table标签内</span></span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;demo&#x27;</span>).innerHTML = html</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-7-设置请求超时"><a href="#3-7-设置请求超时" class="headerlink" title="3.7.设置请求超时"></a>3.7.设置请求超时</h4><blockquote>
<p>如果请求过了很久还没有成功，为了不会白白占用的网络资源，我们一般会主动终止请求。<code>XMLHttpRequest</code>提供了<code>timeout</code>属性来允许设置请求的超时时间。</p>
</blockquote>
<p><code>xhr.timeout</code></p>
<ul>
<li>单位为：毫秒</li>
<li>默认值：0，即不设置超时</li>
<li>在<code>send()</code>之后设置。</li>
<li>同步请求时，xhr.timeout的值必须为0。</li>
</ul>
<p><strong>请求的开始与结束的标志</strong></p>
<ul>
<li>当<code>xhr.onloadstart</code>事件触发的时候，也就是你调用<code>xhr.send()</code>方法的时候。请求开始。</li>
<li>当<code>xhr.loadend</code>事件触发的时候。请求结束。</li>
</ul>
<h4 id="3-8-兼容方案"><a href="#3-8-兼容方案" class="headerlink" title="3.8.兼容方案"></a>3.8.兼容方案</h4><p><code>XMLHttpRequest</code>在老版本浏览器（<code>IE5/6</code>）中有兼容问题，可以通过另外一种方式代替  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="built_in">window</span>.XMLHttpRequest ? <span class="keyword">new</span> XMLHttpRequest() : <span class="keyword">new</span> ActiveXObject(<span class="string">&#x27;Microsoft.XMLHTTP&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h4 id="3-9-如何获取上传、下载的进度"><a href="#3-9-如何获取上传、下载的进度" class="headerlink" title="3.9.如何获取上传、下载的进度"></a>3.9.如何获取上传、下载的进度</h4><p>在上传或者下载比较大的文件时，实时显示当前的上传、下载进度是很普遍的产品需求。<br>我们可以通过<code>onprogress</code>事件来实时显示进度，默认情况下这个事件每50ms触发一次。需要注意的是，上传过程和下载过程触发的是不同对象的<code>onprogress</code>事件：</p>
<ul>
<li>上传触发的是<code>xhr.upload</code>对象的 <code>onprogress</code>事件</li>
<li>下载触发的是<code>xhr</code>对象的<code>onprogress</code>事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xhr.onprogress = updateProgress;</span><br><span class="line">xhr.upload.onprogress = updateProgress;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateProgress</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.lengthComputable) &#123;</span><br><span class="line">      <span class="keyword">var</span> completedPercent = event.loaded / event.total;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-简单的封装"><a href="#4-简单的封装" class="headerlink" title="4.简单的封装"></a>4.简单的封装</h3><blockquote>
<p>函数就可以理解为一个想要做的事情，函数体中约定了这件事情做的过程，直到调用时才开始工作。<br>将函数作为参数传递就像是将一个事情交给别人，这就是委托的概念  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        *method 请求方法</span></span><br><span class="line"><span class="comment">        * url 请求地址</span></span><br><span class="line"><span class="comment">        * params 请求参数</span></span><br><span class="line"><span class="comment">        * done 请求完成过后需要做的事情（委托/回调）</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">method,url,params,done</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> data = <span class="literal">null</span></span><br><span class="line">            <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">            <span class="comment">// 对传入的params对象进行处理</span></span><br><span class="line">            <span class="keyword">let</span> pairs = []</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> params) &#123;</span><br><span class="line">                pairs.push(key +<span class="string">&#x27;=&#x27;</span>+params[key])</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> queryings = pairs.join(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">            <span class="comment">// 判断method,传递不同的请求体</span></span><br><span class="line">            <span class="keyword">if</span> (method.toUpperCase() === <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">                xhr.setRequestHeader(<span class="string">&quot;content-Type&quot;</span>,<span class="string">&quot;application/x-www-urlencoded&quot;</span>)</span><br><span class="line">                data = queryings</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (method.toUpperCase() === <span class="string">&quot;GET&quot;</span>) &#123;</span><br><span class="line">                url = url+<span class="string">&quot;?&quot;</span>+queryings</span><br><span class="line">            &#125;</span><br><span class="line">            xhr.open(method,url)</span><br><span class="line">            xhr.send(data)</span><br><span class="line">            xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.readyState !== <span class="number">4</span>) <span class="keyword">return</span></span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    done(<span class="built_in">JSON</span>.parse(<span class="built_in">this</span>.responseText))</span><br><span class="line">                &#125;<span class="keyword">catch</span>&#123;</span><br><span class="line">                    done(<span class="built_in">this</span>.responseText)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调用函数</span></span><br><span class="line">        ajax(get,<span class="string">&quot;./test.php&quot;</span>,&#123;&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">            alert(res)</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>



<h3 id="5-jQuery中的ajax"><a href="#5-jQuery中的ajax" class="headerlink" title="5.jQuery中的ajax"></a>5.<code>jQuery</code>中的<code>ajax</code></h3><h4 id="5-1-ajax"><a href="#5-1-ajax" class="headerlink" title="5.1.$ajax()"></a>5.1.<code>$ajax()</code></h4><ol>
<li>引入<code>jQuery</code>文件</li>
<li><strong>使用<code>$.ajax()</code></strong></li>
<li>基本的参数<ul>
<li><code>url</code>：请求地址</li>
<li>type：请求方法，默认为 get</li>
<li><code>dataType</code>：服务端响应数据类型  </li>
<li><code>contentType</code>：请求体内容类型，默认 <code>application/x-www-form-urlencoded</code></li>
<li>data：需要传递到服务端的数据，如果 GET 则通过 URL 传递，如果 POST 则通过请求体传递 </li>
<li>timeout：请求超时时间 </li>
<li><code>beforeSend</code>：请求发起之前触发（open，send之前）</li>
<li>success：请求成功之后触发（响应状态码 200） </li>
<li>error：请求失败触发 </li>
<li>complete：请求完成触发（即不管成功与否，都会触发）</li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">url: <span class="string">&#x27;./get.php&#x27;</span>,</span><br><span class="line">type: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">dataType: <span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">data: &#123; <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">beforeSend: <span class="function"><span class="keyword">function</span> (<span class="params">xhr</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;before send&#x27;</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 这里的data会根据服务端响应的content-Type 自动转化为对象</span></span><br><span class="line"><span class="comment">// success 请求成功之后（状态码为200）才会执行</span></span><br><span class="line">success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;,</span><br><span class="line">error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;,</span><br><span class="line">complete: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;request completed&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="5-2-get"><a href="#5-2-get" class="headerlink" title="5.2 $.get"></a>5.2 <code>$.get</code></h4><p>GET请求快捷方法</p>
<p><code>jQuery.get( url [, data ] [, success(data, textStatus, jqXHR) ] [, dataType ] )</code></p>
<ul>
<li>url:一个包含发送请求的URL字符串</li>
<li>data:发送给服务器的字符串或Key/value键值对。</li>
<li>success:当请求成功后执行的回调函数。</li>
<li>dataType:从服务器返回的预期的数据类型（xml, json, script, 或 html）。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">&quot;test.php&quot;</span>,</span><br><span class="line">   <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">     $(<span class="string">&#x27;body&#x27;</span>).append( <span class="string">&quot;Name: &quot;</span> + data.name ) <span class="comment">// John</span></span><br><span class="line">              .append( <span class="string">&quot;Time: &quot;</span> + data.time ); <span class="comment">//  2pm</span></span><br><span class="line">   &#125;, <span class="string">&quot;json&quot;</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过<code>$.get()</code>方法返回的jQuery XHR对象，或“jqXHR，”实现了 Promise 接口，使它拥有 Promise 的所有属性，方法和行为</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> jqxhr = $.post(<span class="string">&quot;example.php&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     alert(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">   &#125;)</span><br><span class="line">   .success(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">&quot;second success&quot;</span>); &#125;)</span><br><span class="line">   .error(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">&quot;error&quot;</span>); &#125;)</span><br><span class="line">   .complete(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">&quot;complete&quot;</span>); &#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="5-3-post"><a href="#5-3-post" class="headerlink" title="5.3.$.post"></a>5.3.<code>$.post</code></h4><p>POST请求快捷方法</p>
<p><code>jQuery.post( url [, data ] [, success(data, textStatus, jqXHR) ] [, dataType ] )</code></p>
<h4 id="5-4-getJSON"><a href="#5-4-getJSON" class="headerlink" title="5.4.$.getJSON()"></a>5.4.<code>$.getJSON()</code></h4><p>使用一个HTTP GET请求从服务器加载<code>JSON</code>编码的数据。</p>
<p><code>jQuery.getJSON( url [, data ] [, success(data, textStatus, jqXHR) ] )</code></p>
<ul>
<li>url:一个包含发送请求的URL字符串</li>
<li>data:发送给服务器的字符串或Key/value键值对</li>
<li><strong>success(data, textStatus, jqXHR)</strong>:当请求成功后执行的回调函数。</li>
</ul>
<h4 id="5-5-load"><a href="#5-5-load" class="headerlink" title="5.5.$.load()"></a>5.5.<code>$.load()</code></h4><p>从服务器载入数据并且将返回的 HTML 代码并插入至 匹配的元素 中。</p>
<p><code>.load(url,data,complete)</code></p>
<ul>
<li>url服务器地址</li>
<li>data,向服务器发送请求的Key/value参数，例如{name:””,age:23}</li>
<li>complete，请求成功回调函数</li>
</ul>
<p><strong>Request Method（请求方法）</strong></p>
<p>默认使用 GET 方式 ， 如果data参数提供一个对象，那么使用 POST 方式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;我是原页面内容&lt;/h2&gt;</span><br><span class="line">    &lt;div id=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;./jquery-3.5.1.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="comment">// 这里参数是$，表示jquery是局部作用域</span></span><br><span class="line">        $(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</span><br><span class="line">            $(<span class="string">&quot;#box&quot;</span>).load(<span class="string">&quot;yemian.html h3&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>第一个空格后面是一个jQuery选择器，返回的内容中匹配改选择器的内容将被载人到页面中。</p>
</blockquote>
<h4 id="5-6-getScript"><a href="#5-6-getScript" class="headerlink" title="5.6.$.getScript"></a>5.6.<code>$.getScript</code></h4><p><code>jQuery.getScript( url [, success(script, textStatus, jqXHR) ] )</code><strong>使用一个HTTP GET请求从服务器加载并执行一个 JavaScript 文件</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$.getScript(<span class="string">&quot;ajax/test.js&quot;</span>)</span><br><span class="line">.done(<span class="function"><span class="keyword">function</span>(<span class="params">script, textStatus</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log( textStatus );</span><br><span class="line">&#125;)</span><br><span class="line">.fail(<span class="function"><span class="keyword">function</span>(<span class="params">jqxhr, settings, exception</span>) </span>&#123;</span><br><span class="line">  $( <span class="string">&quot;div.log&quot;</span> ).text( <span class="string">&quot;Triggered ajaxError handler.&quot;</span> );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>从jQuery 1.5开始，可以用<a target="_blank" rel="noopener" href="https://www.jquery123.com/deferred.fail"><code>.fail()</code></a>来处理错误,不在依托全局<code>.ajaxError（）</code>事件</li>
<li>默认情况下，<code>$.getScript()</code> cache选项被设置为 <code>false</code>。可以使用 <a target="_blank" rel="noopener" href="https://www.jquery123.com/jquery.ajaxsetup"><code>$.ajaxSetup()</code></a>设置cache=true</li>
</ol>
</blockquote>
<h4 id="5-7-全局事件"><a href="#5-7-全局事件" class="headerlink" title="5.7.全局事件"></a>5.7.全局事件</h4><table>
<thead>
<tr>
<th>事件</th>
<th>参数</th>
<th>作用</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td><code>.ajaxStart()</code></td>
<td>**handler()**被调用的函数</td>
<td><em>在AJAX 请求刚开始时执行一个处理函数</em></td>
<td><code>$(document).ajaxStart(function()&#123;&#125;</code></td>
</tr>
<tr>
<td><code>.ajaxStop()</code></td>
<td>**handler()**被调用的函数</td>
<td><em>在AJAX 请求完成时执行一个处理函数</em></td>
<td><code>$(document).ajaxStop(function() &#123;$( &quot;#loading&quot; ).hide();&#125;);</code></td>
</tr>
<tr>
<td><code>.ajaxError()</code></td>
<td>**handler(event, jqXHR, ajaxSettings, thrownError)**被调用的函数</td>
<td><em>Ajax请求出错时注册一个回调处理函数</em></td>
<td><code>$(document).ajaxError(function() &#123;$( &quot;div.log&quot; ).text(&quot;Triggered ajaxError handler.&quot; );&#125;);</code></td>
</tr>
<tr>
<td><code>.ajaxComplete()</code></td>
<td>**handler(event, XMLHttpRequest, ajaxOptions)**被调用的函数</td>
<td><em>当Ajax请求完成后注册一个回调函数。</em></td>
<td><code>$(document).ajaxComplete(function(event,request, settings)&#123;$( &quot;#msg&quot;).append(&quot;&lt;li&gt;Request Complete.&lt;/li&gt;&quot;);&#125;);</code></td>
</tr>
<tr>
<td><code>.ajaxSuccess()</code></td>
<td><strong>handler(event, XMLHttpRequest, ajaxOptions)</strong></td>
<td><em>绑定一个函数当 Ajax 请求成功完成时执行</em></td>
<td><code>$(document).ajaxSuccess(function(event, request, settings) &#123;$( &quot;#msg&quot; ).append( &quot;&lt;li&gt;Successful Request!&lt;/li&gt;&quot; );&#125;);</code></td>
</tr>
<tr>
<td><code>.ajaxSend()</code></td>
<td><strong>handler(event, jqXHR, ajaxOptions)</strong></td>
<td><em>在Ajax请求发送之前绑定一个要执行的函数</em></td>
<td><code>$(document).ajaxSend(function(event, request, settings) &#123;$( &quot;#msg&quot; ).append( &quot;&lt;li&gt;Starting request at&quot; +settings.url+&quot;&lt;/li&gt;&quot;);&#125;);</code></td>
</tr>
</tbody></table>
<h3 id="6-跨域"><a href="#6-跨域" class="headerlink" title="6.跨域"></a>6.跨域</h3><h4 id="6-1-概念"><a href="#6-1-概念" class="headerlink" title="6.1.概念"></a>6.1.概念</h4><p><strong>同源策略</strong>是浏览器的一种安全策略，所谓同源是指<strong>域名，协议，端口</strong>完全相同，<em>只有同源的地址才可以相互通过<code>AJAX</code> 的方式请求。</em><br>同源或者不同源说的是两个地址之间的关系，不同源地址之间请求我们称之为跨域请求 。</p>
<p>什么是同源？例如：<a target="_blank" rel="noopener" href="http://www.example.com/detail.html">http://www.example.com/detail.html</a> 与一下地址对比  </p>
<table>
<thead>
<tr>
<th>对比地址</th>
<th>是否同源</th>
<th>原因</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="http://api.example.com/detail.html">http://api.example.com/detail.html</a></td>
<td>不同源</td>
<td>域名不同</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.example.com/detail.html">https://www.example.com/detail.html</a></td>
<td>不同源</td>
<td>协议不同</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://www.example.com:8080/detail.html">http://www.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>端口不同</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://api.example.com:8080/detail.html">http://api.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>域名、端口不同</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://api.example.com/detail.html">https://api.example.com/detail.html</a></td>
<td>不同源</td>
<td>协议、域名不同</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.example.com:8080/detail.html">https://www.example.com:8080/detail.html</a></td>
<td>不同源</td>
<td>端口、协议不同</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://www.example.com/other.html">http://www.example.com/other.html</a></td>
<td>同源</td>
<td>只是目录不同</td>
</tr>
</tbody></table>
<blockquote>
<p>在同源策略下，只能同源地址ajax才能相互访问，它只能发送请求，不能拿到服务端的数据。这与ajax的原理违背，只能发送请求却无法获取服务端的响应。</p>
</blockquote>
<p>可以发送请求的标签：<code>img link script iframe</code></p>
<p><strong>1.img</strong></p>
<p>可以发送不同源地址之间的请求，无法拿到响应结果。</p>
<p><strong>2.link</strong></p>
<p> 真正的定义：链入一个文档，通过 rel 属性申明链入的文档与当前文档之间的关系。</p>
<p><strong>3.script</strong></p>
<p>可以发送不同源地址之间的请求，无法拿到响应结果。</p>
<p>虽然script标签无法获取到响应结果，但是我们可以通过与服务端的配合，让服务端返回一段JS，作用是调用我们事先定义好的一个函数，从而将服务端想要给客服端发送去的数据发送给客户端。<strong>这就是<code>JSONP</code>原理</strong>。</p>
<h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><p>JSON with Padding，是一种借助于 script 标签发送跨域请求的技巧。<br><strong>原理</strong>：就是在客户端借助 script 标签请求服务端的一个动态网页（php 文件），服务端的这个动态网页返回一段带有函数调用的 JavaScript 全局函数调用的脚本，将原本需要返回给客户端的数据传递进去。  </p>
<p>以后绝大多数情况都是采用 JSONP 的手段完成不同源地址之间的跨域请求<br>客户端 <a target="_blank" rel="noopener" href="http://www.zce.me/users-list.html">http://www.zce.me/users-list.html</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;http://api.zce.me/users.php?callback=foo&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>服务端 <a target="_blank" rel="noopener" href="http://api.zce.me/users.php?callback=foo">http://api.zce.me/users.php?callback=foo</a> 返回的结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo([<span class="string">&#x27;我&#x27;</span>, <span class="string">&#x27;是&#x27;</span>, <span class="string">&#x27;你&#x27;</span>, <span class="string">&#x27;原&#x27;</span>, <span class="string">&#x27;本&#x27;</span>, <span class="string">&#x27;需&#x27;</span>, <span class="string">&#x27;要&#x27;</span>, <span class="string">&#x27;的&#x27;</span>, <span class="string">&#x27;数&#x27;</span>, <span class="string">&#x27;据&#x27;</span>])</span><br></pre></td></tr></table></figure>



<blockquote>
<p>总结：由于 XMLHttpRequest 无法发送不同源地址之间的跨域请求，所以我们必须要另寻他法，script 这种方案就是我们最终选择的方式，我们把这种方式称之为 JSONP，如果你不了解原理，先记住怎么用，多用一段时间再来看原理  </p>
</blockquote>
<p><strong>问题：</strong></p>
<ol>
<li>JSONP 需要服务端配合，服务端按照客户端的要求返回一段 JavaScript 调用客户端的函数</li>
<li>只能发送 GET 请求  </li>
</ol>
<blockquote>
<p>注意：JSONP 用的是 script 标签，更 A JAX 提供的 XMLHttpRequest 没有任何关系！！！  </p>
</blockquote>
<p><code>jQuery 中使用 JSONP 就是将 dataType 设置为 jsonp  </code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url:<span class="string">&quot;http://localhost/jsonp/server.php&quot;</span>,</span><br><span class="line">    type:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    dataType:jsonp,</span><br><span class="line">    success:<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 首先我们创建一个api接口 */</span></span><br><span class="line"><span class="comment">/* 我们创建的地址是 http://localhost:51355/home/getnametwo?name=czklove */</span></span><br><span class="line"><span class="comment">/* 我们使用jsonp的方式去请求以下这个接口 */</span></span><br><span class="line"><span class="comment">/* 第一步我们创建一个script标签 */</span></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">let</span> scrpt = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">    <span class="comment">/* 第二步设置sricpt标签的src属性*/</span> </span><br><span class="line">    scrpt.src = <span class="string">&#x27;http://localhost:51355/home/getnametwo?name=czklove&amp;callback=callback&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(scrpt);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* callback为接受返回数据的回到函数 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 服务端如果使用php,应该将它的请求头的类型，改为js对象，并且定义一个函数。</span></span><br></pre></td></tr></table></figure>



<h4 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h4><p>Cross Origin Resource Share，跨域资源共享  ,IE浏览器不能低于IE10。IE8+：IE8/9需要使用XDomainRequest对象来支持CORS。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 允许远端访问</span></span><br><span class="line">header(<span class="string">&#x27;Access‐Control‐Allow‐Origin: *&#x27;</span>); <span class="comment">// 通配符</span></span><br><span class="line">header(<span class="string">&#x27;Access‐Control‐Allow‐Origin: http://localhost/jsonp&#x27;</span>)  <span class="comment">// 也可以是指定域名</span></span><br></pre></td></tr></table></figure>

<p>这种方案无需客户端作出任何变化（客户端不用改代码），只是在被请求的服务端响应的时候添加一个 <code>AccessControl-Allow-Origin</code> 的响应头，表示这个资源是否允许指定域请求。  </p>
<p><strong>非简单模式下：</strong></p>
<p>非简单请求相对于简单请求，浏览器会多一次预检的功能，如果浏览器检测大本次请求不是简单请求，那么就去浏览器上去拿三个信息</p>
<p>Access-Control-Allow-Origin，Access-Control-Allow-Methods，Access-Control-Allow-Headers，分别是请求源，请求方式，请求头部的一些基本信息，三个都符合要求那么就能像浏览器发送请求，就和正常的简单请求一样了。</p>
<h4 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h4><p>使用<strong>postMessage跨域</strong> 实现跨域 h5新提出来的一个api,支持ie8+,chrome 这种方式不太像是跨域请求数据的方式，而是跨页面传送数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;a 页面&lt;/h1&gt;</span><br><span class="line">    &lt;iframe src=<span class="string">&quot;http://localhost:8082/b.html&quot;</span> id=<span class="string">&quot;iframea&quot;</span>&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">/* a 页面使用postmessage 向 iframe 的b页面传送数据 */</span></span><br><span class="line"><span class="keyword">let</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;iframea&#x27;</span>)</span><br><span class="line"></span><br><span class="line">iframe.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> message = &#123;<span class="attr">name</span>: <span class="string">&#x27;czklove&#x27;</span>&#125;;</span><br><span class="line">    <span class="comment">/* 向 http://localhost跨域传送数据*/</span></span><br><span class="line">    iframe.contentWindow.postMessage(<span class="built_in">JSON</span>.stringify(message),<span class="string">&#x27;http://localhost:8082/&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;message&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;message-----&#x27;</span> + <span class="built_in">JSON</span>.parse(e.data).name)</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>b页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;zheshi第二个页面&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">/* 接收数据 */</span></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;message&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> message = <span class="built_in">JSON</span>.parse(e.data);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;b已经接收到了数据&#x27;</span>+message.name)</span><br><span class="line">        <span class="keyword">if</span>(message) &#123;</span><br><span class="line">            message.name=<span class="string">&#x27;ljkjkjk&#x27;</span>;</span><br><span class="line">            <span class="built_in">window</span>.parent.postMessage(<span class="built_in">JSON</span>.stringify(message),<span class="string">&#x27;http://localhost:8081&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,<span class="literal">false</span>)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
    <div>
      
        <div>
    
        <div style="text-align:center;color:#ccc;font-size:14px;">----------文本结束<i class="fa fa-hand-o-right"></i>感谢您的阅读--------</div>
    
</div>
      
    </div>
        <div class="reward-container">
  <div>坚持原创，感谢您的支持！</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/wechat.jpg" alt="IT warm Man 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/zhifubao.jpg" alt="IT warm Man 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/ajax/" rel="tag"><i class="fa fa-tag"></i> ajax</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/09/10/2css+css3/" rel="prev" title="css以及css3新增部分"">
      <i class="fa fa-chevron-left"></i> css以及css3新增部分"
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/09/10/7.Http/" rel="next" title="http协议">
      http协议 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax"><span class="nav-number">1.</span> <span class="nav-text">Ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="nav-number">1.1.</span> <span class="nav-text">1.概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"><span class="nav-number">1.2.</span> <span class="nav-text">2.快速上手</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-readyState"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1.readyState</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E9%81%B5%E5%BE%AAHTTP"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2.遵循HTTP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-open-%E5%8F%82%E6%95%B0"><span class="nav-number">1.2.3.</span> <span class="nav-text">2.3.open()参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%93%8D%E5%BA%94"><span class="nav-number">1.2.4.</span> <span class="nav-text">2.4.服务器响应</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-responseType"><span class="nav-number">1.2.5.</span> <span class="nav-text">2.5.responseType</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6-%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81"><span class="nav-number">1.2.6.</span> <span class="nav-text">2.6.响应状态</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%94%A8%E6%B3%95"><span class="nav-number">1.3.</span> <span class="nav-text">3.用法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-GET%E8%AF%B7%E6%B1%82"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1.GET请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-POST%E8%AF%B7%E6%B1%82"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2.POST请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%BC%82%E6%AD%A5"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3.同步与异步</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A5%E5%85%85%EF%BC%9A%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B"><span class="nav-number">1.3.4.</span> <span class="nav-text">补充：进程与线程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.3.5.</span> <span class="nav-text">3.4.响应数据格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-%E8%8E%B7%E5%8F%96response%E6%95%B0%E6%8D%AE"><span class="nav-number">1.3.6.</span> <span class="nav-text">3.5.获取response数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-6-%E5%A4%84%E7%90%86%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93"><span class="nav-number">1.3.7.</span> <span class="nav-text">3.6.处理响应数据渲染</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E8%B6%85%E6%97%B6"><span class="nav-number">1.3.8.</span> <span class="nav-text">3.7.设置请求超时</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-8-%E5%85%BC%E5%AE%B9%E6%96%B9%E6%A1%88"><span class="nav-number">1.3.9.</span> <span class="nav-text">3.8.兼容方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-9-%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E4%B8%8A%E4%BC%A0%E3%80%81%E4%B8%8B%E8%BD%BD%E7%9A%84%E8%BF%9B%E5%BA%A6"><span class="nav-number">1.3.10.</span> <span class="nav-text">3.9.如何获取上传、下载的进度</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E7%AE%80%E5%8D%95%E7%9A%84%E5%B0%81%E8%A3%85"><span class="nav-number">1.4.</span> <span class="nav-text">4.简单的封装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-jQuery%E4%B8%AD%E7%9A%84ajax"><span class="nav-number">1.5.</span> <span class="nav-text">5.jQuery中的ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-ajax"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1.$ajax()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-get"><span class="nav-number">1.5.2.</span> <span class="nav-text">5.2 $.get</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-post"><span class="nav-number">1.5.3.</span> <span class="nav-text">5.3.$.post</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-getJSON"><span class="nav-number">1.5.4.</span> <span class="nav-text">5.4.$.getJSON()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-5-load"><span class="nav-number">1.5.5.</span> <span class="nav-text">5.5.$.load()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-6-getScript"><span class="nav-number">1.5.6.</span> <span class="nav-text">5.6.$.getScript</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-7-%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6"><span class="nav-number">1.5.7.</span> <span class="nav-text">5.7.全局事件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E8%B7%A8%E5%9F%9F"><span class="nav-number">1.6.</span> <span class="nav-text">6.跨域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-%E6%A6%82%E5%BF%B5"><span class="nav-number">1.6.1.</span> <span class="nav-text">6.1.概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSONP"><span class="nav-number">1.6.2.</span> <span class="nav-text">JSONP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CORS"><span class="nav-number">1.6.3.</span> <span class="nav-text">CORS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iframe"><span class="nav-number">1.6.4.</span> <span class="nav-text">iframe</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="IT warm Man"
      src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3684345252,2646729991&fm=26&gp=0.jpg">
  <p class="site-author-name" itemprop="name">IT warm Man</p>
  <div class="site-description" itemprop="description">IT新人报道，各位大佬们多多指教！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/1738736002" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;1738736002" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1738736002@qq.com" title="E-Mail → mailto:1738736002@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5752159618/home?wvr=5" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5752159618&#x2F;home?wvr&#x3D;5" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
  </div>



    <div class="links-of-blogroll motion-element links-of-blogroll-block">
      <div class="links-of-blogroll-title">
        <!-- modify icon to fire by szw -->
        <i class="fa fa-history fa-" aria-hidden="true"></i>
        近期文章
      </div>
      <ul class="links-of-blogroll-list">
        
        
          <li>
            <a href="/" title="" target="_blank"></a>
          </li>
        
          <li>
            <a href="/" title="" target="_blank"></a>
          </li>
        
          <li>
            <a href="/" title="" target="_blank"></a>
          </li>
        
          <li>
            <a href="/" title="" target="_blank"></a>
          </li>
        
          <li>
            <a href="/" title="" target="_blank"></a>
          </li>
        
      </ul>
    </div>

  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" title="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;zh-CN&#x2F;docs&#x2F;Web&#x2F;JavaScript" rel="noopener" target="_blank">MDN</a>
        </li>
    </ul>
  </div>


      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
      
      
     <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=22712173&auto=0&height=66"></iframe>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">IT warm Man</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">320k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">4:51</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>-->


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'HhBmsqkNlfQB4gpLpmFYUDxv-gzGzoHsz',
      appKey     : '7j1MdMn5bsljKv5N792nVH5h',
      placeholder: "留言区",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,e,a=0;a<r.length;a++)t=r[a],e=void 0,0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
</html>
